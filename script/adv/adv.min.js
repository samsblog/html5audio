$.fn.advAudio=function(e){e=$.extend({volEnables:true,pauseEnabled:true,responsiveEnabled:true,progressBarEnabled:true,volumeEnabled:true,color:"#f0f0f0"},e);return this.each(function(){if(e.color!==undefined){$(this).wrap('<div style="background-color:'+e.color+';" class="adv_wrp"></div>')}else{console.log("ADVError: Color is not defined.");return}if(e.pauseEnabled==true){$(this).parent().append('<button class="adv_play" title="Play" class="" >Play<span class="btn">');$(this).parent().find(".adv_play").bind("click",function(){$(this).toggleClass("active");var t=$(this).parent().find("audio")[0];if(t.paused||t.ended){t.play()}else{t.pause()}if(e.progressBarEnabled==true){var n=$(this).parent().find(".adv_progress")[0];t.addEventListener("timeupdate",function(){if(t.currentTime>0){value=Math.floor(100/t.duration*t.currentTime)}n.style.width=value+"%"})}})}$(this).bind("ended",function(){$(this).parent().find(".adv_play").removeClass("active")});if(e.responsiveEnabled==true){$(this).parent(".adv_wrp").addClass("responsive")}if(e.progressBarEnabled==true){$(this).parent().append('<div class="adv_progressbar"><div class="adv_progress"></div></div>');$(this).parent().find(".adv_progressbar").each(function(){$(this).bind("click",function(e){var t=$(this).parent().children("audio");var n=e.pageX;var r=$(this).children(".adv_progress");var i=n-r.offset().left;var s=t[0].duration;var o=100*i/$(this).width();if(o>100){o=100}if(o<0){o=0}r[0].style.width=o+"%";t[0].currentTime=s*(o/100)})})}if(e.volumeEnabled==true){$(this).parent().append('<div class="adv_vol"><span class="btn"></span><input class="adv_vol_control" min="0" value="1" max="1" step="0.1" type="range" /></div>');$(this).parent().find(".adv_vol").bind("click",function(){$(this).toggleClass("open")});$(this).parent().find(".adv_vol_control").change(function(){console.log("change");var e=$(this).parent().parent().children("audio");var t=$(this);e[0].volume=t[0].value})}})}